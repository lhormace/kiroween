# Production Configuration for AWS Elastic Beanstalk
server.port=${SERVER_PORT:5000}

# PID file for Elastic Beanstalk health monitoring
spring.pid.file=/var/pids/web.pid
spring.pid.fail-on-write-error=false

# Disable local mode in production
local.mode=false

# AWS Configuration
aws.s3.bucket=${S3_BUCKET_NAME:health-chat-data}
aws.region=${AWS_REGION:ap-northeast-1}

# Session Configuration
server.servlet.session.timeout=24h
server.servlet.session.cookie.name=HEALTH_CHAT_SESSION
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=strict

# Thymeleaf Configuration - Caching enabled for production
spring.thymeleaf.cache=true
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# Logging - Optimized for CloudWatch
logging.level.root=WARN
logging.level.com.health.chat=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.boot=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Actuator endpoints for health checks
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true

# Performance optimizations
spring.mvc.log-request-details=false
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.accept-count=100
server.tomcat.max-connections=10000

# Graceful shutdown
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# Compression for better performance
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Connection timeout
server.tomcat.connection-timeout=20000
